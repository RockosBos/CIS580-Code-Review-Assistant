{% include "header.html" %}

<div>
	{% with repo = request.args.get("repository_url") %}
	<h1>Results from {{ repo }}</h1>
	{% endwith %}

	<h2>Recent Files with Bugs</h2>
	<table>
		<tr>
			<td>File Name</td>
			<td>Bug Density</td>
			<td>Timestamp</td>
		</tr>
		{% for i in tsData %}
		<tr>
			<td>{{i.getFile()}}</td>
			<td>{{i.getDensity()}}</td>
			<td>{{i.getLastCommitDate()}}</td>
		</tr>
		{% endfor %}
	</table>

	<h2>Most Commonly Affected Bug Files</h2>
	{% if top_density_results %}
	<table>
		<tr>
			<td>File Name</td>
			<td>Bug Density</td>
			<td>Timestamp</td>
		</tr>

		{% for i in top_density_results %}
		<tr>
			<td>{{i.getFile()}}</td>
			<td>{{i.getDensity()}}</td>
		</tr>
		{% endfor %}
	</table>
	{% else %}
	<p>No files have been identified with bug density > .25</p>
	{% endif %}

	<form method="post">
		<button type="submit" class='btn btn-primary btn-med px-4 me-sm-3 accent-color button-border' name="genCSVButton">Generate CSV Report</button>
		<button type='submit' class='btn btn-primary btn-med px-4 me-sm-3 accent-color button-border' name='ReturnToRepoSelectButton'>Return to Repo Select</button>
	</form>
</div>